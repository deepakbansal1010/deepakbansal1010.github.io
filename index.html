<!doctype html>
<head>
	<title>Select Example</title>
	<link rel="stylesheet" href="select-form.css">
</head>
<body>
	<div class="container">
		<h1 style="margin: 20px 0px;">React Select</h1>
		<hr/>
		<h4>React Multi-Select</h4>
		<div id="select" style="margin: 10px 0;"></div>
		
		<h4>React Single Select <small></small></h4>
		<div id="firmMemberSelect" style="margin: 10px 0;">
		</div>
		<h4>React Single Select <small><i>With Disable Option</i></small></h4>
		<div id="firmMemberSelectDisabled" style="margin: 10px 0;">
		</div>
		<h4>React Single Select <small><i>Email ids of the employees</i></small></h4>
		<div id="firmMemberSelectEmail" style="margin: 10px 0;">
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.1.1.js"></script>
	<script src="https://unpkg.com/react@0.14.2/dist/react.min.js"></script>
	<script src="https://unpkg.com/react-dom@0.14.2/dist/react-dom.min.js"></script>
	<script src="https://unpkg.com/three.js@0.73.0/build/three.min.js"></script>
	<script src="https://unpkg.com/classnames@2.0.0/index.js"></script>
	<script src="https://unpkg.com/react-input-autosize@0.6.3/dist/react-input-autosize.min.js"></script>
	<script src="select-form.js"></script>
	<script>
		var Container = React.createClass({
			getInitialState () {
				return { value: 'al' };
			},
     		load : function(input, callback) {
     			input = input == "" ? "a" : input; 
    			$.ajax({
    				type: 'GET',
				    url: "https://qa-api.mckinsey.com/v1/persons/autosuggest?limit=30&q=" + input,
				    headers: {"Apikey": "1695-f6baf186-533a-4385-ade5-b37092578bb4"},
				    success: function(response){
				    	callback(null, {options: response.persons});
				    },
				    error: function(response){
				    	console.log(response);
				    }
				});
		     },
		    updateValue : function(value) {
		      this.setState({ value: value });
		    },
			render () {
				return React.createElement(Select.Async, {
				 	multi: true,
			        backspaceRemoves: false,
			        clearable: false,
			        scrollMenuIntoView: false,
			        value: this.state.value,
			        loadOptions: this.load,
			        onChange: this.updateValue,
			        labelKey: 'fullName',
			        valueKey: 'personId'
				});
			}
		});
		var SingleSelectContainerDisabled = React.createClass({
			getInitialState () {
				return { value: ''};
			},
     		load : function(input, callback) {
     			input = input == "" ? "a" : input; 
    			$.ajax({
    				type: 'GET',
				    url: "https://qa-api.mckinsey.com/v1/persons/autosuggest?limit=30&q=" + input,
				    headers: {"Apikey": "1695-f6baf186-533a-4385-ade5-b37092578bb4"},
				    success: function(response){
					console.log(response)
				    	callback(null, {options: response.persons});
				    },
				    error: function(response){
				    	console.log(response);
				    }
				});
		     },
		    updateValue : function(value) {
		      this.setState({ value: value });
		    },
		    toggleCheckbox (e) {
				if(!this.state.disabled)
					this.setState({disabled:true});
				else
					this.setState({disabled:false})
			},
			render () {
				return React.createElement("div",{classname:"firm-member-select"},
					React.createElement(Select.Async, {
				        backspaceRemoves: false,
				        clearable: false,
				        scrollMenuIntoView: false,
				        autoload: true,
				        value: this.state.value,
				        loadOptions: this.load,
				        onChange: this.updateValue,
				        labelKey: 'fullName',
				        valueKey: 'personId',
						disabled:this.state.disabled
					}),
					React.createElement("label",{ className: "checkbox", style: { marginLeft: 10 } },
					React.createElement("input", { type: "checkbox", className: "checkbox-control", name: "disabled", checked: this.state.disabled, onChange: this.toggleCheckbox }),
					React.createElement("span",{ className: "checkbox-label" },"Disabled")));
			}
		});
		var SingleSelectContainer = React.createClass({
			getInitialState () {
				return { value: ''};
			},
     		load : function(input, callback) {
     			input = input == "" ? "a" : input; 
    			$.ajax({
    				type: 'GET',
				    url: "https://qa-api.mckinsey.com/v1/persons/autosuggest?limit=30&q=" + input,
				    headers: {"Apikey": "1695-f6baf186-533a-4385-ade5-b37092578bb4"},
				    success: function(response){
					console.log(response)
				    	callback(null, {options: response.persons});
				    },
				    error: function(response){
				    	console.log(response);
				    }
				});
		     },
		    updateValue : function(value) {
		      this.setState({ value: value });
		    },
			render () {
				return React.createElement(Select.Async, {
				        backspaceRemoves: false,
				        clearable: false,
				        scrollMenuIntoView: false,
				        autoload: true,
				        value: this.state.value,
				        loadOptions: this.load,
				        onChange: this.updateValue,
				        labelKey: 'fullName',
				        valueKey: 'personId'								});
			}
		});
		var SingleSelectContainerEmail = React.createClass({
			getInitialState () {
				return { value: ''};
			},
     		load : function(input, callback) {
     			input = input == "" ? "a" : input; 
    			$.ajax({
    				type: 'GET',
				    url: "https://qa-api.mckinsey.com/v1/persons/autosuggest?limit=30&q=" + input,
				    headers: {"Apikey": "1695-f6baf186-533a-4385-ade5-b37092578bb4"},
				    success: function(response){
					console.log(response)
				    	callback(null, {options: response.persons});
				    },
				    error: function(response){
				    	console.log(response);
				    }
				});
		     },
		    updateValue : function(value) {
		      this.setState({ value: value });
		    },
			render () {
				return React.createElement(Select.Async, {
				        backspaceRemoves: false,
				        clearable: false,
				        scrollMenuIntoView: false,
				        autoload: true,
				        value: this.state.value,
				        loadOptions: this.load,
				        onChange: this.updateValue,
				        labelKey: 'email',
				        valueKey: 'personId'								});
			}
		});

		React.render(
			React.createElement(Container),
			document.getElementById('select')
		);
		React.render(
			React.createElement(SingleSelectContainer),
			document.getElementById('firmMemberSelect')
		);
		React.render(
			React.createElement(SingleSelectContainerDisabled),
			document.getElementById('firmMemberSelectDisabled')
		);
		React.render(
			React.createElement(SingleSelectContainerEmail),
			document.getElementById('firmMemberSelectEmail')
		);
	</script>
</body>
